@page "/guests"
@inject HttpClient Http
<h1 class="text-center">Guests</h1>
@if (guests == null)
{
    <p><em>Loading...</em></p>
}
else
{

    @foreach (var guest in guests)
    {
            <div class="row">
                <div class="col-md-12">
                    <h3>@guest.name</h3>
                </div>

    <div class="col-md-12">
        @if (!string.IsNullOrEmpty(guest.twitter))
                {
                    <p>Twitter: @guest.twitter</p>
                }
                @if (!string.IsNullOrEmpty(guest.fb))
                {
                    <p>Facebook: @guest.fb</p>
                }
                @if (!string.IsNullOrEmpty(guest.twitch))
                {
                    <p>Twitch: @guest.twitch</p>
                }
            </div>

            <div class="col-md-12">
                @if (guest.dndIds.Any())
                {

                    <h5>Dnd Episodes</h5>
                    <table class="table table-hover">
            <thead>
                <tr>
                    <th scope="col-md-2">Episode</th>
                    <th scope="col-md-2">Podcast</th>
                    <th scope="col-md-2">Release Date</th>
                    <th scope="col-md-2">Youtube</th>
                </tr>
            </thead>
            <tbody>

                @foreach (var id in guest.dndIds)
                            {
                                <td>@dndEpisodes.First(d => d.episode == id).title</td>
                                <td>TF: Rise Of The World Killers</td>
                                <td>@dndEpisodes.First(d => d.episode == id).releasedate</td>
                                <td>@dndEpisodes.First(d => d.episode == id).youtubelink</td>
                            }


                        </tbody>

                    </table>
                }

            </div>
            <div class="col-md-12">
                @if (guest.comicIds.Any())
                {
                    <h5>Comic Episodes</h5>
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th scope="col-md-2">Episode</th>
                                <th scope="col-md-2">Podcast</th>
                                <th scope="col-md-2">Release Date</th>
                                <th scope="col-md-2">Youtube</th>
                            </tr>
                        </thead>
                        <tbody>

                            @foreach (var id in guest.comicIds)
                            {
                                <td>@comics.First(c => c.episode == id).title</td>
                                <td>IDW 2005 Comics</td>
                                <td>@comics.First(c => c.episode == id).releasedate</td>
                                <td>@comics.First(c => c.episode == id).youtubelink</td>

                            }

                        </tbody>
                    </table>

                }
            </div>

        </div>

    }
}







@code {
    private Guest[] guests;
    private Comic[] comics;
    private DndEpisode[] dndEpisodes;
    protected override async Task OnInitializedAsync()
    {
        guests = await Http.GetFromJsonAsync<Guest[]>("guests/guests.json");
        comics = await Http.GetFromJsonAsync<Comic[]>("comic-episodes/comics.json");
        dndEpisodes = await Http.GetFromJsonAsync<DndEpisode[]>("dnd-episodes/dnd.json");
    }
    public class DndEpisode
    {
        public int episode { get; set; }
        public string title { get; set; }
        public string releasedate { get; set; }
        public string youtubelink { get; set; }

    }
    public class Comic
    {
        public int episode { get; set; }
        public string title { get; set; }
        public string releasedate { get; set; }
        public string youtubelink { get; set; }

    }
    public class Guest
    {
        public int guestId { get; set; }
        public string name { get; set; }
        public List<int> dndIds { get; set; }
        public List<int> comicIds { get; set; }
        public string twitter { get; set; }
        public string fb { get; set; }
        public string twitch { get; set; }


    }
}